<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>OMNI</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<style>
:root{
  --bg:#000;
  --fg:#fff;
  --muted:rgba(255,255,255,.42);

  --accent:hsl(215 85% 58%);
  --accent-soft:hsl(215 85% 58% / .35);

  --focus:.5;
  --line-width:220px;
  --line-core-alpha:.62;
  --line-halo-alpha:.26;
  --line-halo:18px;
  --grain:.035;
  --tap:0;
}

*{box-sizing:border-box}
html,body{height:100%;margin:0}
html{color-scheme:dark}

body{
  background:radial-gradient(circle at 50% 40%, #06070a, #000 60%);
  color:var(--fg);
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
}

/* OMNI axis */
body::after{
  content:"";
  position:fixed;
  top:0;bottom:0;left:50%;
  width:1px;
  background:linear-gradient(to bottom,transparent,var(--accent-soft),transparent);
  opacity:calc(.25 + var(--tap)*.35);
  transform:translateX(-.5px);
  pointer-events:none;
}

/* Grain */
body::before{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  background:repeating-linear-gradient(
    0deg,
    rgba(255,255,255,.015),
    rgba(255,255,255,.015) 1px,
    transparent 1px,
    transparent 3px
  );
  opacity:var(--grain);
}

/* Center */
.center{
  text-align:center;
  padding:28px 18px;
  min-width:min(92vw,520px);
}

/* OMNI mark */
.omni-mark{
  width:26px;height:26px;
  margin:0 auto 10px;
  border-radius:50%;
  position:relative;
}
.omni-mark::before{
  content:"";
  position:absolute;inset:0;
  border-radius:50%;
  border:1px solid var(--accent-soft);
}
.omni-mark::after{
  content:"";
  position:absolute;inset:7px;
  border-radius:50%;
  background:var(--accent);
  filter:blur(6px);
  opacity:calc(.35 + var(--focus)*.6);
  animation:breath 5.5s ease-in-out infinite;
}
@keyframes breath{
  0%,100%{transform:scale(.92);opacity:.35}
  50%{transform:scale(1.08);opacity:.65}
}

.status{
  font-size:15px;
  letter-spacing:.08em;
  text-transform:uppercase;
  opacity:calc(.5 + var(--focus)*.6);
}

.field{
  margin:22px auto 0;
  width:var(--line-width);
  height:1px;
  position:relative;
  transform:translateY(calc(var(--tap)*-2px));
}
.field .core{
  position:absolute;inset:0;
  background:linear-gradient(to right,transparent,var(--accent),transparent);
  opacity:var(--line-core-alpha);
}
.field::after{
  content:"";
  position:absolute;inset:-8px 0;
  background:linear-gradient(to right,transparent,var(--accent),transparent);
  filter:blur(var(--line-halo));
  opacity:var(--line-halo-alpha);
}

.capability{
  margin-top:18px;
  font-size:11px;
  letter-spacing:.34em;
  text-transform:uppercase;
  color:var(--muted);
  opacity:0;
  transform:translateY(6px);
  filter:blur(2px);
  transition:all 1.3s ease;
}
.capability.visible{
  opacity:.85;
  transform:translateY(0);
  filter:blur(0);
}

.hint{
  margin-top:10px;
  font-size:10px;
  letter-spacing:.18em;
  color:rgba(255,255,255,.28);
  user-select:none;
}

/* Panel */
.panel{
  position:fixed;
  left:50%;bottom:22px;
  transform:translateX(-50%) translateY(14px);
  width:min(92vw,560px);
  background:rgba(10,12,16,.6);
  border:1px solid rgba(255,255,255,.08);
  border-radius:14px;
  padding:12px;
  backdrop-filter:blur(16px);
  opacity:0;
  pointer-events:none;
  transition:.35s;
}
.panel.show{
  opacity:1;
  pointer-events:auto;
  transform:translateX(-50%) translateY(0);
}
.panel .row{
  display:flex;
  gap:10px;
  justify-content:space-between;
}
.panel .k{
  font-size:10px;
  letter-spacing:.22em;
  text-transform:uppercase;
  color:rgba(255,255,255,.55);
}
.panel .v{
  font-size:12px;
  color:rgba(255,255,255,.85);
}
.panel .bar{
  height:6px;
  border-radius:999px;
  background:rgba(255,255,255,.08);
  overflow:hidden;
  margin:8px 0;
}
.panel .bar i{
  display:block;
  height:100%;
  width:50%;
  background:linear-gradient(90deg,transparent,var(--accent),transparent);
}
.panel .btns{
  display:flex;
  gap:10px;
  justify-content:flex-end;
}
button{
  border:none;
  border-radius:10px;
  padding:8px 10px;
  background:rgba(255,255,255,.08);
  color:#fff;
}
button:hover{background:rgba(255,255,255,.11)}
</style>
</head>

<body>

<div class="center">
  <div class="omni-mark"></div>
  <div class="status" id="status">adaptive equilibrium</div>

  <div class="field" id="field"><div class="core"></div></div>

  <div class="capability" id="capability"></div>
  <div class="hint" id="hint">tap / move / hold • triple-tap for signal</div>
</div>

<div class="panel" id="panel">
  <div class="row">
    <div>
      <div class="k">OMNI BRAIN</div>
      <div class="v">v57.0</div>
    </div>
    <div class="v" id="pClock">—</div>
  </div>

  <div class="bar"><i id="pBar"></i></div>

  <div class="row">
    <div class="k">Mood</div><div class="v" id="pMood"></div>
    <div class="k">Energy</div><div class="v" id="pEnergy"></div>
    <div class="k">Curiosity</div><div class="v" id="pCuriosity"></div>
  </div>

  <div class="row">
    <div class="k">Intent</div><div class="v" id="pIntent"></div>
    <div class="k">Attention</div><div class="v" id="pAttention"></div>
    <div class="k">Entropy</div><div class="v" id="pEntropy"></div>
  </div>

  <div class="row">
    <div class="k">Level</div><div class="v" id="pLevel"></div>
    <div class="k">Sessions</div><div class="v" id="pSessions"></div>
    <div class="k">Interactions</div><div class="v" id="pInteractions"></div>
  </div>

  <div class="btns">
    <button id="btnPulse">pulse</button>
    <button id="btnWipe">reset</button>
    <button id="btnClose">close</button>
  </div>
</div>

<script>
/* ===============================
   OMNI BRAIN v57 (FULL)
=============================== */
(()=>{
"use strict";

const TAU=Math.PI*2, HALF=.5;
const clamp=x=>x<0?0:x>1?1:x;
const lerp=(a,b,t)=>a+(b-a)*t;
const rand=()=>Math.random();
const now=()=>performance.now();

const KEY="omni_brain_v57";

const DEFAULT={
  core:{mood:HALF,energy:HALF,curiosity:HALF,intent:HALF,attention:HALF},
  meta:{sessions:0,time:0,interactions:0,level:0,entropy:0},
  caps:{unlocked:[],affinity:{}},
  last:{tap:0,cap:null}
};

let brain;
try{
  brain=JSON.parse(localStorage.getItem(KEY))||structuredClone(DEFAULT);
}catch{brain=structuredClone(DEFAULT)}
brain.meta.sessions++;

const root=document.documentElement;
const statusEl=document.getElementById("status");
const capEl=document.getElementById("capability");
const panel=document.getElementById("panel");

const CAPS=[
"Core","Signal","Field","Vector","Pattern","Echo","Schema","Pulse",
"Resonance","Glyph","Halo","Prism","Spiral","Lumen","Horizon"
];

function save(){localStorage.setItem(KEY,JSON.stringify(brain))}

function updateTheme(){
  const c=brain.core;
  const hue=210+Math.sin(brain.meta.time/160*TAU)*18+c.curiosity*60;
  root.style.setProperty("--accent",`hsl(${hue} 85% 58%)`);
  root.style.setProperty("--line-width",150+c.attention*190+"px");
  root.style.setProperty("--focus",c.attention.toFixed(3));
  root.style.setProperty("--tap",brain.last.tap.toFixed(3));
}

function whisper(){
  if(!brain.caps.unlocked.length||Math.random()>.25)return;
  const cap=brain.caps.unlocked[Math.random()*brain.caps.unlocked.length|0];
  capEl.textContent=cap;
  capEl.classList.add("visible");
  setTimeout(()=>capEl.classList.remove("visible"),2200);
}

function tick(){
  brain.meta.time++;
  brain.meta.level=Math.floor(
    brain.meta.sessions+
    brain.meta.interactions*.6+
    brain.core.curiosity*12
  );
  CAPS.forEach((c,i)=>{
    if(brain.meta.level>i&&!brain.caps.unlocked.includes(c))
      brain.caps.unlocked.push(c);
  });
  whisper();
  updateTheme();
  save();
}

function pulse(s=.25){
  const c=brain.core;
  c.attention=clamp(c.attention+s*.6);
  c.intent=clamp(c.intent+s*.4);
  c.energy=clamp(c.energy+s*.3);
  c.curiosity=clamp(c.curiosity+s*.35);
  brain.meta.interactions+=s*2;
  brain.last.tap=clamp(brain.last.tap+s);
}

let last=now();
function raf(){
  const t=now(),dt=(t-last)/16.6; last=t;
  const c=brain.core;
  c.attention=clamp(c.attention-.002*dt);
  c.mood=clamp(c.mood+(rand()-.5)*.002);
  brain.last.tap=lerp(brain.last.tap,0,.06*dt);
  requestAnimationFrame(raf);
}

document.getElementById("btnPulse").onclick=()=>pulse(.35);
document.getElementById("btnClose").onclick=()=>panel.classList.remove("show");
document.getElementById("btnWipe").onclick=()=>{
  localStorage.removeItem(KEY);location.reload();
};

window.addEventListener("pointerdown",e=>{
  pulse(.22);
});

window.addEventListener("keydown",e=>{
  if(e.key==="p")panel.classList.toggle("show");
  if(e.key===" ")pulse(.3);
});

setInterval(tick,1100);
requestAnimationFrame(raf);
tick();

})();
</script>

</body>
</html>
