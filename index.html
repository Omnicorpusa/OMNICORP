<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>OMNI</title>
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<style>
:root{
  --bg:#fff;
  --fg:#0b0b0d;
  --muted:rgba(11,11,13,.55);
  --line:rgba(11,11,13,.18);
}
@media (prefers-color-scheme: dark){
  :root{
    --bg:#000;
    --fg:#fff;
    --muted:rgba(255,255,255,.55);
    --line:rgba(255,255,255,.18);
  }
}
*{box-sizing:border-box}
html,body{height:100%;margin:0}
body{
  background:var(--bg);
  color:var(--fg);
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
  display:grid;
  place-items:center;
}
.center{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:16px;
}
.logo{
  width:clamp(300px,60vw,460px);
}
.search-wrap{width:260px}
.search-input{
  width:100%;
  padding:10px 14px;
  border-radius:999px;
  border:1px solid var(--line);
  background:transparent;
  color:var(--fg);
  text-align:center;
}
.results{
  font-size:11px;
  letter-spacing:.06em;
  color:var(--muted);
  min-height:18px;
}
.results.active{color:var(--fg)}
</style>
</head>

<body>

<div class="center">

  <!-- LOGO (unchanged SVG allowed here) -->
  <div class="logo">OMNI</div>

  <!-- SEARCH -->
  <div class="search-wrap">
    <form id="searchForm">
      <input id="searchInput" class="search-input"
        type="search" placeholder="SEARCH OMNI"/>
    </form>
  </div>

  <!-- RESULTS -->
  <div class="results" id="results">OMNI IDLE</div>

</div>

<script>
let coreWin=null;
function ensureCore(){
  if(!coreWin||coreWin.closed){
    coreWin=window.open("core.html","omni-core","width=520,height=720");
  }
}

const input=document.getElementById("searchInput");
const results=document.getElementById("results");

input.addEventListener("input",e=>{
  const v=e.target.value.trim();
  if(!v)return;
  results.textContent=`INTENT · ${v.toUpperCase()}`;
  results.classList.add("active");
  ensureCore();
  coreWin.postMessage({
    source:"omni-index",
    type:"intent",
    value:v.toLowerCase()
  },"*");
});

document.getElementById("searchForm").addEventListener("submit",e=>{
  e.preventDefault();
  const v=input.value.trim();
  if(!v)return;
  ensureCore();
  coreWin.postMessage({
    source:"omni-index",
    type:"submit",
    value:v.toLowerCase()
  },"*");
});

window.addEventListener("message",e=>{
  const m=e.data;
  if(!m||m.source!=="omni-core")return;
  if(m.type==="summary"&&m.top?.length){
    results.textContent=`ACTIVE · ${m.top.join(" · ")}`;
    results.classList.add("active");
  }
});
</script>

</body>
</html>
